#!/bin/bash
source ~/.cache/wal/colors.sh
# Cache wallpaper path
WALLPAPER=~/.config/wpg/.current-rofi.jpg
LOCK_IMG="/tmp/lockscreen.png"

# Darken dan blur wallpaper (adjust -50 untuk lebih/kurang gelap)
convert "$WALLPAPER" -brightness-contrast -20x0 -blur 0x5 "$LOCK_IMG"

# Lock dengan minimal processing
i3lock \
  --image "$LOCK_IMG" \
  --fill \
  --clock \
  --time-str="%H:%M" \
  --date-str="%A, %d %B" \
  --radius 120 \
  --ring-width 10 \
  --inside-color="${color0}00" \
  --ring-color="${color7}88" \
  --line-color="${color0}00" \
  --keyhl-color="${color4}ff" \
  --bshl-color="${color1}ff" \
  --separator-color="${color0}00" \
  --insidever-color="${color0}00" \
  --ringver-color="${color5}ff" \
  --insidewrong-color="${color1}33" \
  --ringwrong-color="${color1}ff" \
  --time-color="${color7}ff" \
  --date-color="${color6}ff" \
  --verif-color="${color7}ff" \
  --wrong-color="${color1}ff" \
  --nofork
